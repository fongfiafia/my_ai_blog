---
title: 10分钟用Cursor存储数据到小程序云数据库
excerpt: 手把手教你如何开通小程序云服务，如何使用cursor零代码开发，将用户注册的手机号存入云数据库中
author: 未生AI
date: 2024-11-23
readTime: 10 min read
views: 1.2K
---

## 概述

> 文章所有内容来自我指导群友的录屏过程

相信当你使用cursor完成开发了一个简单的页面，你一定成就满满！那么你是否想进一步挑战自己？做一点更有挑战的东西，比方说一个完整的真实注册功能，实现将用户注册的信息存起来，然后根据这些信息做一些处理。 

恭喜你！读完这篇文章，你将掌握如何使用微信小程序的云开发功能，创建一个云数据库来存储用户信息。举一反三，掌握基本方法后，你可以自由发挥实现存储各种东西，比如订单信息、快递信息、社交动态、聊天记录、交易记录等等数据，这意味着你可以做
出更复杂的功能。

## 什么是微信的云开发

> 官方文档：https://developers.weixin.qq.com/minigame/dev/wxcloud/basis/getting-started.html

我来给大家通俗易懂的解释下什么事云开发，尤其是「云」这个含义。我们举个例子想象你正在经营一家小店：

🏪 传统方式：

- 你需要租店面（服务器）
- 自己管理收银系统（数据库）
- 处理库存（文件存储）
- 雇人看店（维护运营）
- 担心停电（服务器宕机）
- 操心安保（网络安全）

☁️ 用了云开发就像：

- 直接入驻商场（微信平台）
- 商场提供收银系统（云数据库）
- 统一的仓储中心（云存储）
- 物业全程服务（运维管理）
- 有备用发电（容灾备份）
- 配备保安系统（安全防护）

简单来说，"云"就是把复杂的事情交给微信去做。你只需要专注于你的"生意"（也就是小程序的具体功能），其他的技术问题都由微信帮你搞定。

## 云开发包含哪些功能

云开发的三大核心能力：
1. 云数据库：就像一个超大的Excel表格，可以方便地存取各种数据
2. 云存储：相当于一个无限容量的网盘，可以存图片、视频等文件
3. 云函数：像是你的"智能小助手"，可以帮你处理各种后台逻辑


## 什么时候要用到云开发

我来给出一些例子，看看是否有你想要做的或者类似的产品，这些都是很好的建议和例子。

📱 社交类应用
- 朋友圈类小程序
  * 云存储：保存用户上传的图片和视频
  * 云数据库：存储用户信息、点赞评论
  * 云函数：处理图片审核、消息推送

🎮 游戏类小程序
- 多人对战/排行榜游戏
  * 云数据库：记录玩家分数、排名
  * 云函数：匹配玩家、计算排名
  * 实时数据推送：更新游戏状态

🛒 电商类应用
- 社区团购小程序
  * 云数据库：商品信息、订单管理
  * 云存储：商品图片、商家资质
  * 云函数：自动接单、价格计算
  * 定时触发器：自动结算、订单状态更新

📚 教育类应用
- 在线课程平台
  * 云存储：课程视频、教材文档
  * 云数据库：学习进度、考试成绩
  * 云函数：自动批改、学习统计

🏥 医疗健康类
- 预约挂号小程序
  * 云数据库：医生排班、预约记录
  * 云函数：智能分诊、自动提醒
  * 实时推送：等候通知、就诊提醒

🎵 音乐类应用
- 音乐播放小程序
  * 云存储：音频文件
  * 云数据库：歌单、收藏
  * 云函数：音频转码、版权检测

📝 工具类应用
- 笔记/待办事项
  * 云数据库：笔记内容、任务清单
  * 云存储：图片附件
  * 云函数：定时提醒、数据同步

🎨 AI创意类
- AI绘画小程序
  * 云函数：对接AI模型
  * 云存储：存储生成的图片
  * 云数据库：用户作品集

写完以上内容后，我思考了几个小时，将他们的核心本质逻辑抽象了出来。如果你的产品涉及到如下内容的，那么就适合使用云开发：
1. 需要用户注册登录
2. 需要存储大量数据
3. 需要文件上传下载
4. 需要后台处理逻辑
5. 需要实时数据更新
6. 需要定时任务处理
7. 需要消息推送通知

## 云开发收费吗

这是我们最关心的部分，我来给大家描述下。微信云开发确实是收费的。目前的收费政策是首月免费，后续每个月19.9元，这一个月包含一下使用额度：

- 云函数调用次数:1百万次
- 数据库容量:2GB
- 数据库读操作:5万次
- 数据库写操作:3万次  
- 云存储容量:5GB
- 云存储下载操作:5GB
- CDN流量:5GB

超出这些额度后，就需要按实际使用量付费了,举几个常见的例子:
- 云函数每增加100万次调用,收费9.9元
- 数据库每增加1GB存储空间,收费0.07元/天
- 云存储每增加1GB容量,收费0.0043元/天

但是从我的使用经验告诉你，对于普通小程序开发者来说，**19.9一个月的额度其实已经够用了**。比如说您开发一个社区小程序,每天有几百人使用,基本上都能被覆盖。

只有当您的小程序用户量特别大,或者业务规模增长很快的时候,才可能超出额度。这时候也说明您的小程序已经有了不错的发展,相信这部分的费用不会成为大问题。

## 开通云开发服务

打开微信小程序开发工具，在左上角有个云开发按钮，点击进入

![云开发入口](/miniprogram/yun_dev/1.png)

点击后会弹出界面，开始创建云开发环境，输入环境名称，你可以看到套餐的配额，目前首月是免费的，后续每个月是19.9元，一杯奶茶的钱。

在输入环境名称后（可以随便填写，例如dev表示开发），然后点击开通，稍微等待1分钟内，我们的云开发环境就创建好了。下面就是云开发的界面，这一次我们使用的是数据库这一功能。

![云开发控制台](/miniprogram/yun_dev/2.png)


## 利用Cursor Chat寻求指导

开通云服务后，我们接下来该怎么做呢？很多人这个时候不知道该怎么继续，其实这个时候我们想Cursor进行询问即可，这里我们使用Cursor的Chat功能即可，按下cmd/control + l 
在Cursor的右侧弹出chat面板。
- 如果你不了解cursor的界面布局，请阅读我这篇文章，我还搭配了视频讲解 [cursor的界面介绍](https://www.lookai.top/cn/cursor/basic/cursor_interface)
- 如果你不了解Cursor的Chat是什么，请你阅读我这篇文章 [Cursor AI聊天详解(Chat)](https://www.lookai.top/cn/cursor/advance/cursor_chat)

### 获取云数据库的开发文档
当然了，我们需要先找到云数据库的开发文档，然后在向cursor提问，你可以百度搜索，当然细心地你会发现云开发控制台右上角的帮助点击后，会出现云开发文档，点击打开后，我们跳到
数据库的章节，而这个链接就是我们需要交给Cursor请教的上下文。

![云开发文档入口](/miniprogram/yun_dev/3.png)

![云开发文档](/miniprogram/yun_dev/4.png)

### 向Cursor请教
如何向Cursor请教询问问题，也是门学问，我的经验是，只要你提问的更加精确和清晰，那么回答才会更加准确。例如这里我的提问是：我想存储用户的信息，请参考这个文档，告诉我该做些什么？
注意了，这里我明确说明了，我想做什么：「存用户信息」。

很多刚开始使用AI的伙伴，不会这么描述，往往会非常笼统地提问,例如:
- "怎么做用户系统?"
- "帮我看看代码"
- "这个要怎么做?"
- "数据库怎么用?"

这样模糊的问题会让AI难以理解你的真实需求,给出的答案可能偏离你的预期。我的提问方式有几个核心的要点：
- 明确目标 - 说明你想实现什么：我想存储用户信息（当然这里我可以描述的更加细节，可以说我想存储用户手机号码）
- 提供上下文 - 给出相关的背景信息：我讲官方的开发文档交给cursor让他参考
- 具体需求 - 详细描述你的具体要求：请告诉我我该怎么做

向Cursor请教完成以后，我们仔细阅读Cursor返回的内容，我们得知了如果要将用户信息进行存储，我们该做什么：
- 创建一个用户信息集合
- 开发代码写入用户信息集合

得到嘞使用云数据库的思路步骤以后，我们就可以一步一步的提问，分别询问每一步的详细执行内容是什么。

## 云数据库新建集合

我对于步骤一进行了展开提问，让他详细告诉我具体该做什么，cursor也给到了我们详细的操作步骤。我们按照操作步骤执行即可
![提问1](/miniprogram/yun_dev/5.png)

### 创建集合

我们打开微信开发者工具，点击左上角的云开发按钮，在顶部菜单中选择数据库，点击集合名称旁边的+号创建新集合，输入集合名称users，
点击提交。注意记住这个users集合名字，后续数据都是存在这个users中，不要写错了，或者后续给Cursor引导的时候写错，否则可能
无法写入数据。

![提问1](/miniprogram/yun_dev/6.png)

### 设置集合权限

我来用通俗易懂的方式解释微信小程序中集合的读写权限设置，想象一下,集合就像是一个保险箱:

- 你需要决定谁能打开它(读取数据)
- 谁能往里面放东西(写入数据)
- 谁能拿走或改变里面的物品(更新/删除数据)

这里预留一个坑，因为我们一开始没有配置正确，后面再调试阶段再来进行配置。

## 用Cursor开发一个注册页面

Cursor给出的步骤二就是开发一个注册页面，我们直接给Cursor下达一个：帮我开发一个注册页面，页面需要一个手机号的指令，让他
帮我们开发即可。

![注册页面](/miniprogram/yun_dev/7.png)


很多同学看到这里，一定会觉得这也太简单，就一个手机号来进行注册。但这里其实最主要的目的是，快速验证。对于一个你从来没接触过的领域，大家一定要先用最小的成本来探究可行性。

假设我们一上来就搞了一个复杂的注册页面，包含：
- 手机号输入与验证
- 短信验证码发送和校验
- 密码设置（包含强度检测）
- 图形验证码防刷
- 用户协议勾选
- 注册按钮节流处理

当我们花了大量时间做完这些，却发现数据无法写入数据库。这时问题排查会变得异常困难：
1. 是验证码校验的问题？
2. 还是数据库权限设置错了？
3. 又或是某个必填字段没传对？
4. 可能是防刷限制触发了？

而且在向AI寻求帮助时，你需要提供的上下文信息会变得很多：
- 完整的表单代码
- 验证逻辑
- 数据库结构
- 权限设置
- 报错信息

缺少任何一块信息，都可能导致问题无法准确定位。因此，我的经验是：**应该循序渐进，步步为营**

## 调试注册

因为页面足够简单，只需要几秒钟的时候页面就生成好了，我们开始让Cursor将数据写到云数据库中，注意要指明写入的集合名字是什么，不要写错了！
![](/miniprogram/yun_dev/8.png)

同样因为足够简单，也是几秒钟后Cursor就帮我写好了内容。

### 调试1：手机号校验删除

我们开始调试，输入手机号点击注册以后，页面弹出请输入正确的手机号，有经验的同学会知道这是因为程序帮我做了手机号的合法性校验，
虽然我们没让Cursor去做这些，但是它...出于它优秀的模型能力自动帮我实现。

没经验的同学，不知道为什么出现这个提示的，就可以向Cursor反馈这个问题，Cursor会帮助你解决，但是同样的提问要讲究方法。回看一下
上面我给的提问核心要点，相信你明白该怎么提问，文末我会给上正确的提问方式，可以划到下面查看。

那么这里为了方便我让Cursor直接去掉这个了校验。

### 调试2：出错了

手机号的校验去掉以后，我们继续验证，然后再次出现问题，放轻松这是很常见的问题，我们将错误信息交给Cursor，Cursor能够知道为什么！
这个时候你是否庆幸，还好现在我们没有搞那么复杂的注册页面。

![错误信息](/miniprogram/yun_dev/10.png)

Cursor给出了解决方法:
![错误解决](/miniprogram/yun_dev/11.png)

注意阅读Cursor的回答，它给出了详细的错误原因，以及解决方法。原因是没有初始化环境，他要求我们将your-env-id替换为你的环境ID，这个ID在云开发控制台的右上角，点击复制即可。

![环境ID](/miniprogram/yun_dev/12.png)

很多同学不会注意Cursor返回的文字说明，而是直接无脑accept all，大家一定要多注意Cursor返回的文字内容，比如让你去
修改一个变量，删除一个文件，一旦错过这些内容，除了问题后续Cursor很难排查，因为他会默认认为你做了它让你做的事情。

同时如果更加认真的同学可以复盘思考下，为什么Cursor一开始写代码的时候没有给我初始化，给个提示一定是我的提示词写的不够好，
具体原因我会放在文末补充。 大家有时候要不断思考一下怎么让AI一次性准确的完成我们交代的任务，这也就是提示词的魅力所在。

### 数据库权限设置
有出错啦，我们再次将报错交给Cursor就行，提示的是集合权限设置问题，他会告诉我们怎么去设置。我后面去了解了下权限设置，说实话权限的设置还是挺复杂的，
我看了半天头晕因的。但是呢，对于我们小白，不用那么理解，先能用就行，我们简单直接设置成，读写全部开放。

![权限设置](/miniprogram/yun_dev/13.png)

##  确认云数据库是否有数据
终于没有报错了，我们最后需要去数据库确认下数据是否正确的写入了数据库中。打开云开发控制面板，点击数据库，点击集合users
点击记录列表，如果你发现多了一行记录，那么恭喜你成功了一半，我们点击记录，在右边查看具体的字段，如果你看到了
phone这个字段，那么恭喜你，你成功的将用户输入的数据存到了数据库中！

![权限设置](/miniprogram/yun_dev/14.png)


## 怎么读取数据
这里我就不做具体说明了，因为聪明你一定知道怎么弄，无非就是，将开发文档给到cursor，说清楚你需要读取users集合，根据用户的手机号
来查询数据。

## 结论
通过这篇文章的学习，相信你已经掌握了如何将数据存储到云数据库的基本技能。这只是小程序开发的冰山一角，但却是一个重要的起点。你现在可以：

- 开通并使用云开发环境
- 创建和配置数据库集合
- 使用Cursor开发基础功能
- 调试并解决常见问题


> 1. 提问：我输入xxxx手机号，点击注册以后，页面弹出「请输入正确的手机号」，请告诉我原因，我该怎么避免
> 「我输入xxxx手机号，点击注册以后，页面弹出「请输入正确的手机号」」 这是详细的上下文
> 「请告诉我原因，我该怎么避免」这是具体需求

> 2. 原因是我在让Cursor帮我将手机号存到数据库的时候，没有引用开发文档，我遗忘了这件事情了，开发文档中明确有写需要先初始化步骤，如果我将开发文档给了Cursor，他就能一次性完成开发，不会出错。